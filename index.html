<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allinonebd - Game Zone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e5e7eb;
            touch-action: none;
        }
        .game-container {
            width: 100%;
            max-width: 900px; /* ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ ‡¶¨‡ßú ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã */
            margin: 1rem auto;
        }
        .main-game-box {
            background-color: white;
            border: 1px solid #d1d5db;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            min-height: 500px; /* ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Æ‡¶ø‡¶®‡¶ø‡¶Æ‡¶æ‡¶Æ ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶≤‡ßã */
        }
        .ad-placeholder {
            background-color: #d1d5db;
            border: 2px dashed #9ca3af;
            color: #4b5563;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            min-height: 50px;
        }
        #game-board {
            border: 5px solid #374151;
            border-radius: 8px;
            background-color: #9ae6b4; /* ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶∏‡¶¨‡ßÅ‡¶ú ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° */
        }
        .game-list-item {
            cursor: pointer;
            transition: transform 0.2s;
        }
        .game-list-item:hover {
            transform: translateY(-5px);
        }
    </style>
</head>
<body class="p-2 md:p-4">

    <div class="game-container">
        <div class="ad-placeholder h-24 mb-4">
             </div>

        <div class="grid grid-cols-2 sm:grid-cols-4 gap-3 text-center mb-4">
            <a href="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞-‡¶°‡¶ø‡¶∞‡ßá‡¶ï‡ßç‡¶ü-‡¶≤‡¶ø‡¶ô‡ßç‡¶ï-‡ßß" target="_blank" class="p-3 bg-green-500 text-white font-bold rounded-lg shadow-md">üéÅ Claim Bonus</a>
            <a href="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞-‡¶°‡¶ø‡¶∞‡ßá‡¶ï‡ßç‡¶ü-‡¶≤‡¶ø‡¶ô‡ßç‡¶ï-‡ß®" target="_blank" class="p-3 bg-blue-500 text-white font-bold rounded-lg shadow-md">‚ñ∂Ô∏è Play & Win</a>
            <a href="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞-‡¶°‡¶ø‡¶∞‡ßá‡¶ï‡ßç‡¶ü-‡¶≤‡¶ø‡¶ô‡ßç‡¶ï-‡ß©" target="_blank" class="p-3 bg-yellow-500 text-white font-bold rounded-lg shadow-md">üíé Get Reward</a>
            <a href="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞-‡¶°‡¶ø‡¶∞‡ßá‡¶ï‡ßç‡¶ü-‡¶≤‡¶ø‡¶ô‡ßç‡¶ï-‡ß™" target="_blank" class="p-3 bg-red-500 text-white font-bold rounded-lg shadow-md">‚ö° Instant Win</a>
        </div>

        <div class="main-game-box">
            <div id="game-selection-screen">
                <h1 class="text-3xl font-bold text-gray-800 mb-2 text-center">Choose a Game</h1>
                <p class="text-center text-gray-500 mb-6">Select a game from the list below to start earning points!</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div id="select-snake-game" class="game-list-item bg-gray-50 p-4 rounded-lg shadow hover:shadow-lg border-2 border-transparent hover:border-indigo-500">
                        <div class="flex items-center space-x-4">
                            <i class="ph-snake-bold text-5xl text-green-600"></i>
                            <div>
                                <h3 class="text-xl font-bold">Classic Snake</h3>
                                <p class="text-gray-600">Eat the food, grow your snake, and get the highest score!</p>
                            </div>
                        </div>
                    </div>
                    <div class="game-list-item bg-gray-100 p-4 rounded-lg shadow border-2 border-transparent cursor-not-allowed opacity-50">
                         <div class="flex items-center space-x-4">
                            <i class="ph-bird-bold text-5xl text-blue-500"></i>
                            <div>
                                <h3 class="text-xl font-bold">Flappy Bird (Coming Soon)</h3>
                                <p class="text-gray-600">Tap to fly and avoid the pipes!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="game-area" class="hidden text-center">
                <div class="flex justify-between items-center mb-4 px-2">
                    <h2 id="game-title" class="text-2xl font-bold">Snake Game</h2>
                    <div class="text-lg font-bold bg-gray-200 px-4 py-2 rounded-lg">Score: <span id="score">0</span></div>
                </div>
                <div class="flex justify-center">
                    <canvas id="game-board" width="400" height="400"></canvas>
                </div>
                 <div id="game-over-screen" class="hidden mt-6">
                    <p class="text-3xl font-bold text-red-600">Game Over!</p>
                    <p class="text-xl mt-1">Your Final Score: <span id="final-score">0</span></p>
                    <div class="mt-4 space-y-3">
                        <button id="restart-btn" class="w-full max-w-xs bg-blue-600 text-white font-bold py-2 px-4 rounded-lg">Play Again</button>
                        <button id="revive-ad-btn" class="w-full max-w-xs bg-green-600 text-white font-bold py-2 px-4 rounded-lg">Watch Ad to Continue</button>
                        <button id="back-to-list-btn" class="text-sm text-gray-500 hover:underline mt-2">Back to Game List</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="ad-placeholder h-24 mt-4">
             </div>
    </div>

    <script>
        // --- Game Selection ---
        const gameSelectionScreen = document.getElementById('game-selection-screen');
        const gameArea = document.getElementById('game-area');
        const selectSnakeGameBtn = document.getElementById('select-snake-game');
        
        selectSnakeGameBtn.addEventListener('click', () => {
            gameSelectionScreen.classList.add('hidden');
            gameArea.classList.remove('hidden');
            startGame();
        });

        document.getElementById('back-to-list-btn').addEventListener('click', () => {
            gameArea.classList.add('hidden');
            gameSelectionScreen.classList.remove('hidden');
        });

        // --- Snake Game Logic ---
        const board = document.getElementById('game-board');
        const context = board.getContext('2d');
        const scoreEl = document.getElementById('score');
        const finalScoreEl = document.getElementById('final-score');
        const gameOverScreen = document.getElementById('game-over-screen');
        const restartBtn = document.getElementById('restart-btn');
        
        const TILE_SIZE = 20;
        const BOARD_SIZE = board.width / TILE_SIZE; // Assumes a square board

        let snake, food, direction, score, gameOver, gameLoop;

        function placeFood() {
            food = {
                x: Math.floor(Math.random() * BOARD_SIZE),
                y: Math.floor(Math.random() * BOARD_SIZE)
            };
            for (let segment of snake) {
                if (segment.x === food.x && segment.y === food.y) {
                    placeFood(); // Recursively find a new spot
                    return;
                }
            }
        }

        function draw() {
            // Draw board background
            context.fillStyle = '#a7d3a1'; // Nokia-like green
            context.fillRect(0, 0, board.width, board.height);

            // Draw food (apple)
            context.fillStyle = '#e54444'; // Red for food
            context.beginPath();
            context.arc(food.x * TILE_SIZE + TILE_SIZE / 2, food.y * TILE_SIZE + TILE_SIZE / 2, TILE_SIZE / 2.5, 0, 2 * Math.PI);
            context.fill();
            
            // Draw snake
            snake.forEach((segment, index) => {
                context.fillStyle = index === 0 ? '#276749' : '#38a169'; // Darker head
                context.fillRect(segment.x * TILE_SIZE, segment.y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                context.strokeStyle = '#a7d3a1'; // Border color same as background
                context.strokeRect(segment.x * TILE_SIZE, segment.y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
            });
        }

        function update() {
            if (gameOver) {
                clearInterval(gameLoop);
                gameOverScreen.classList.remove('hidden');
                finalScoreEl.innerText = score;
                // Next step: Send score to the server here
                return;
            }

            const head = { x: snake[0].x + direction.x, y: snake[0].y + direction.y };
            snake.unshift(head);

            if (head.x === food.x && head.y === food.y) {
                score++;
                scoreEl.innerText = score;
                placeFood();
            } else {
                snake.pop();
            }

            // Wall and self collision
            if (head.x < 0 || head.x >= BOARD_SIZE || head.y < 0 || head.y >= BOARD_SIZE) {
                gameOver = true;
            }
            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    gameOver = true;
                    break;
                }
            }
            
            draw();
        }

        function changeDirection(e) {
            const key = e.key;
            if ((key === 'ArrowUp' || key.toLowerCase() === 'w') && direction.y === 0) direction = { x: 0, y: -1 };
            else if ((key === 'ArrowDown' || key.toLowerCase() === 's') && direction.y === 0) direction = { x: 0, y: 1 };
            else if ((key === 'ArrowLeft' || key.toLowerCase() === 'a') && direction.x === 0) direction = { x: -1, y: 0 };
            else if ((key === 'ArrowRight' || key.toLowerCase() === 'd') && direction.x === 0) direction = { x: 1, y: 0 };
        }
        
        function startGame() {
            snake = [{ x: 10, y: 10 }];
            direction = { x: 0, y: 0 };
            score = 0;
            gameOver = false;
            scoreEl.innerText = score;
            gameOverScreen.classList.add('hidden');
            
            placeFood();
            
            if (gameLoop) clearInterval(gameLoop);
            gameLoop = setInterval(update, 120); // Slightly faster game speed
        }

        // Event Listeners
        restartBtn.addEventListener('click', startGame);
        document.addEventListener('keydown', changeDirection);

        // Placeholder for ad revive
        document.getElementById('revive-ad-btn').addEventListener('click', () => {
            alert('Rewarded Ad feature will be added in the next step!');
        });

    </script>

</body>
</html>
